<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Quà Noel Cho Crush</title>
    <link rel="stylesheet" href="btn.css">
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.19/dist/sweetalert2.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900wght&display=swap');
     /* Tổng thể */
body {
    font-family: 'Poppins', sans-serif;
        background: linear-gradient(to top, #f0e6f6, #ffffff);
        color: #333;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        overflow: hidden;
        position: relative;
}

body:before {
    content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: transparent;
        background-size: cover;
        z-index: -1;
        opacity: 0.8;
}

/* Phông nền cho mỗi phần */
.container, #questionScreen, #journeyScreen{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 182, 193, 0.7);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.container {
    background: rgba(255, 255, 255, 0.8);
    width: 100%;
    height: 100vh;
}
#finalGiftScreen_all {
    display: flex;
    justify-content: space-between; /* Canh các phần tử bên trái và phải */
    align-items: center;
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%); /* Căn giữa theo chiều ngang */
    width: 80%;
    height: 70%;
    padding: 20px;
    justify-items: center;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 182, 193, 0.7);
    overflow: hidden;
    flex-direction: row; /* Cải thiện bố cục thành một hàng ngang */
    animation: glitter 3s infinite alternate;
}
#finalGiftScreen h3 {
    display: none;
    flex-wrap: wrap;
    font-size: medium;
    margin-left: 5px;
    margin-bottom: 10px;
    text-align: center;
}
#finalGiftScreen_all #finalGiftScreen .btn-love{
    margin-bottom: 20%;
}
/* Đảm bảo button và box được ẩn khi tải trang */
#finalGiftScreen_all #xac-nhan,
#finalGiftScreen_all .box {
    display: none;
}

 /* Bố cục của finalGiftScreen */
 #finalGiftScreen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    /* flex: 1; */
    padding: 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
    text-align: center;
    max-height: 90%;
    margin-right: 20px; /* Đảm bảo có khoảng cách với .box */
}
/* Box */
.box {
    position: relative;
    position: relative;
    margin-top: 10%;
    justify-content: space-around;
    width: 83%; 
    max-width: 1000px; /* Đặt max-width để không quá rộng */
    height: 70px; 
    display: flex;
    justify-content: space-between;
    align-items: center; 
    background: linear-gradient(135deg, #6a82fb, #fc5c7d);
    border-radius: 50px;
    box-shadow: 0 5px 50px rgba(0, 0, 0, 0.5);
    padding: 0 30px; 
    transition: transform 0.3s ease, width 0.5s ease;
    flex-wrap: wrap; /* Cho phép các phần tử con xuống dòng nếu cần */
}

/* Các phần tử trong spinner */
.spinner {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row; 
    gap: 10px; /* Điều chỉnh khoảng cách giữa các phần tử */
    user-select: none;
    flex-grow: 1; /* Cho phép spinner chiếm không gian còn lại */
}

.progress {
    position: relative;
    flex-grow: 2; /* Cho phép thanh tiến trình nở rộng */
    width: 100%;
    max-width: 700px; /* Đặt max-width để không quá dài */
    background: #f0f0f0;
    height: 15px;
    border-radius: 50px;
    display: flex;
    flex-direction: row-reverse;
    overflow: hidden;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}

#meter {
    position: relative;
    height: 100%;
    background: #0f0;
    border-radius: 50px;
    transition: 0.5s;
}

.btn {
    position: relative;
    width: 50px;
    height: 50px;
    text-align: center;
    line-height: 50px;
    background: #fff;
    font-size: 1.8em;
    justify-items: center;
    color: #444;
    border-radius: 50%;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn:hover {
    background: #f6a4ff;
    transform: scale(1.1); /* Phóng to nhẹ khi hover */
}

.btn:active {
    background: #f28a8a;
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
    transform: scale(0.95); /* Giảm kích thước khi nhấn */
}

#output {
    position: relative;
    color: #fff;
    font-size: 2.5em;
    font-weight: 700;
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.8), 0 0 15px #0f0;
    width: 60px;  /* Fixed width for output */
    text-align: center; /* Center the text */
    flex-shrink: 0; /* Prevent shrinking */
}

/* Thông báo cute */
#message {
    display: flex;
    position: relative;
    top: 30px;
    left: 0;
    text-align: center;
    font-size: 1.5em;
    color: #ff66b2;
    font-weight: bold;
    width: 100%;
    text-shadow: 0 0 8px rgba(255, 105, 180, 0.8), 0 0 15px #ff66b2;
    transition: opacity 0.5s ease;
}


#questionScreen {
    background: linear-gradient(145deg, #ffe6f0, #ffb3c6);
    background-size: cover;
    animation: backgroundPulse 5s infinite alternate;
    box-shadow: 0px 0px 20px rgba(255, 99, 132, 0.5);
}

@keyframes backgroundPulse {
    0% { background: linear-gradient(145deg, #ffe6f0, #ffb3c6); }
    100% { background: linear-gradient(145deg, #ff99cc, #ff66b3); }
}

/* Điều chỉnh layout cho responsive */
@media only screen and (max-width: 768px) {
    #finalGiftScreen_all {
        top: 10%;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        height: 80%;
    }

    #finalGiftScreen {
        padding: 10px;
        margin-right: 10px;
    }

}

@media only screen and (max-width: 480px) {
    #finalGiftScreen_all {
        top: 5%;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        height: 90%;
    }

    #finalGiftScreen {
        padding: 5px;
        margin-right: 10px;
    }

}

#journeyScreen {
    background-size: cover;
    color: white;
}

@keyframes glitter {
        0% { background: linear-gradient(to bottom, #ffcccb, #f0e6f6); }
        100% { background: linear-gradient(to bottom, #ffb6c1, #ec9ac2); }
    }
@keyframes regretAnim {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
}

/* Thông báo popup cute */
.swal2-popup {
    font-family: 'Kalam', cursive;
    background: linear-gradient(to right, #ff99cc, #ff66b3);
    border-radius: 20px;
    color: #fff;
}

.swal2-title {
    font-size: 2rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}

.swal2-content {
    font-size: 1.2rem;
}

.swal2-confirm {
    background-color: #ff69b4 !important;
    border-radius: 30px;
    box-shadow: 0px 4px 15px rgba(255, 105, 180, 0.5);
    font-size: 1rem;
}

.swal2-icon {
    border: 3px solid #fff !important;
}
@keyframes boxGlow {
    0% { box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.6); }
    100% { box-shadow: 0px 0px 20px rgba(255, 255, 255, 1); }
}
.choice-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 20px;
}

.choice-buttons .btn-love {
    background-color: #ff99cc;
    color: white;
    font-size: 1.2rem;
    padding: 15px 30px;
    border-radius: 30px;
    box-shadow: 0px 0px 15px rgba(255, 182, 193, 0.7);
    transition: transform 0.3s ease;
}

.choice-buttons .btn-love:hover {
    transform: scale(1.1);
    background-color: #ff66b3;
}

/* Phông nền cho các bước tiến hành */
.snow-path {
    background-color: #e6f7ff;
    padding: 20px;
    border-radius: 20px;
    margin-top: 20px;
    box-shadow: 0px 0px 15px rgba(255, 182, 193, 0.5);
}

.leaf {
    position: absolute;
    top: -30px;
    left: 50%;
    width: 40px;
    height: 40px;
    background-color: #4CAF50;
    border-radius: 50%;
    animation: leaf-fall 5s linear infinite;
}

@keyframes leaf-fall {
    0% { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(80vh) rotate(360deg); }
}

@keyframes giftOpen {
    0% { transform: scale(0); }
    100% { transform: scale(1); }
}
/* Tạo hiệu ứng tuyết rơi nhẹ nhàng để không gian thêm phần lãng mạn */
@keyframes snow {
    0% { top: -10%; opacity: 0.8; }
    100% { top: 100%; opacity: 0; }
}

.snowflake {
    position: absolute;
    top: -10%;
    left: calc(100% * (random() - 0.5));
    opacity: 0.6;
    font-size: 12px;
    animation: snow 10s linear infinite;
    pointer-events: none;
}

.snowflake:nth-child(odd) {
    animation-duration: 12s;
    font-size: 14px;
}

/* Tạo các bong bóng bay lên cho không khí dễ thương */
@keyframes bubble {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-200px); opacity: 0; }
}
/* Tiêu đề và mô tả */
h2, p {
    font-size: 1.3rem;
    color: #333;
    font-weight: normal;
    margin-top: 25px;
    letter-spacing: 1px;
}

/* Thêm chút "độc đáo" cho các chi tiết */
.gift-ribbon::before, .gift-ribbon::after {
    content: "";
    position: absolute;
    background-color: #fff;
    border-radius: 50%;
    opacity: 0.8;
}
.btn-love:active {
    animation: popButton 0.2s ease-in-out;
}

/* Hiệu ứng khi nhấn nút */
.btn-love {
    background-color: #ff4081;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 15px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
    transition: background-color 0.3s ease;
}

.btn-love:hover {
    background-color: #e91e63;
}
h3.typing-effect1 {
    color: #FF66B2;
    font-weight: bold;
    font-size: 2rem; /* Tăng kích thước chữ */
    animation: typing 4s steps(40) 5000s forwards; /* Dùng "forwards" để giữ lại trạng thái cuối */
    text-shadow: 0px 0px 20px rgba(255, 102, 178, 0.8), 0px 0px 30px rgba(255, 102, 178, 0.5);
}

.typing-effect1 {
    line-height: 1.7;
    color: #FF66B2;
    font-weight: bold;
    padding: 0 20px;
    width: 100%; /* Đảm bảo không bị cắt bớt */
    overflow: hidden;
    font-size: 2rem; /* Tăng kích thước chữ */
}


/* Cải tiến hiệu ứng gõ chữ */
@keyframes typing {
    from {
        width: 0;
    }
    to {
        width: 100%;
    }
}
/* Responsive design */
@media only screen and (max-width: 768px) {
  body {
    font-size: 14px;
  }
  .container {
    padding: 10px;
  }
}

@media only screen and (max-width: 480px) {
  body {
    font-size: 12px;
  }
  .container {
    padding: 5px;
  }
}
    </style>
</head>
<body>
    <!-- Màn Hình 1: Chào Cậu, Ngày Noel Đặc Biệt -->
    <div class="container" id="initialMessage" >
        <div class="heart">❤️</div>
        <h1 class="typing-effect">Chào cậu, Ngày Noel Đặc Biệt!</h1>
        <p>Chúc Cậu Một Giáng Sinh Vui Vẻ...</p>
        <button class="btn-love" onclick="startJourney()">Bắt đầu nhé</button>
    </div>

    <!-- Màn Hình 2: Một Câu Hỏi Đặc Biệt -->
    <div id="questionScreen" style="display: none;">
        <!-- <div class="gift-box"></div> -->
        <h2 class="typing-effect">Cậu có muốn cùng tớ trải qua mùa Giáng Sinh này không?</h2>
        <div class="choice-buttons">
            <button class="btn-love" onclick="handleChoice(true)">Có</button>
            <button class="btn-love" onclick="handleChoice(false)">Không</button>
        </div>
    </div>
    <!-- Màn Hình 4: Món Quà Giáng Sinh -->
    <div id="finalGiftScreen_all" style="display: none;">
        <div id="finalGiftScreen">
            <h3 class="typing-effect1" style="display: none;">Trước khi nhận món quà siu to khổng lồ của tớ thì hãy đánh giá độ đẹp trai của tấm thân này được bao nhiêu trên thang điểm 10 trong mắt cậu đây.</h3>
            <!-- <button id="xac-nhan" style="display: none;" class="btn-gift" onclick="openGift()">Mở món quà</button> -->
            <div class="dark">
                <button  id="xac-nhan" type="button" style="display: none;" onclick="openGift()">
                    Xác nhận
                </button>
            </div>
        </div>
        <div class="box" >
            <div class="spinner">
                <span id="output"></span>
                <div class="progress">
                    <span id="meter"></span>
                </div>
                <div class="btn plus" onclick="plus()">+</div>
                <div class="btn minus" onclick="minus()">-</div>
            </div>
        </div>
        <div id="message" style="display: none;">Mấy đây, mấy đây ta, tò mò chết tớ mất 👀</div>
    </div>

    <div class="snow"></div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.19/dist/sweetalert2.all.min.js"></script>
    <script>
        let x = 0;
let output = document.getElementById('output');
let meter = document.getElementById('meter');
let message = document.getElementById('message');
output.innerHTML = x;

function updateMessage() {
    if (x == 0) {
        message.innerHTML = "Thôi nào! có muốn lấy quà không đây 😩";
    } else if (x == 10) {
        message.innerHTML = "Mắt nhìn của cậu thật không tồi, Nếu tớ sinh trước năm1504 tác phẩm của Michelangelo sẽ không còn là bức chân của David 😎";
    } else if (x < 3) {
        message.innerHTML = "Chỉ vậy thôi sao 😕";
    } else if (x < 7) {
         message.innerHTML = "Tớ đáng iu lắm đó, suy nghĩ thêm đi mà 🥺";
    } else if (x < 10) {
        message.innerHTML = "Cô gáii thông minh là cô gái biết tớ xinh trai cỡ nào mà 😏";
    }
        message.style.opacity = 1;
    setTimeout(() => {
        message.style.opacity = 0;
    }, 10000); // Hide the message after 2 seconds
}
function plus() {
    if (x >= 10){
        return false;
    }
    if (x >= 4){
   meter.style.background = "#ff80ab"
   meter.style.filter = "drop-shadow(0 0 2.5px #ff80ab) drop-shadow(0 0 10px #ff80ab)"
    }
    if (x >= 8){
        meter.style.background = "#ff3385"
        meter.style.filter = "drop-shadow(0 0 2.5px #ff3385) drop-shadow(0 0 10px #ff3385)"
         }
  output.innerHTML= ++x;
  meter.style.width = x * 10 + '%';
  updateMessage();
}

function minus() {
    if (x <= 0){
        return false;
    }
    if (x <= 6){
        meter.style.background = "#f00"
        meter.style.filter = "drop-shadow(0 0 2.5px #f00) drop-shadow(0 0 10px #f00)"
         }
  output.innerHTML= --x;
  meter.style.width = x * 10 + '%';
  updateMessage();
}
    </script>
    <script>
// Hàm xử lý hiển thị chữ và tự động xuống dòng
function typeTextWithLineBreaks(textElement) {
    const fullText = textElement.textContent;

    // Thực hiện xóa văn bản cũ trong 0,001s
    setTimeout(() => {
        textElement.textContent = '';  // Xóa văn bản cũ nhanh chóng
    }, 1);

    let i = 0;
    let currentLine = ''; // Dùng để theo dõi dòng hiện tại
    let lines = []; // Lưu trữ các dòng của văn bản

    textElement.style.display = 'block'; 

    // Tạo một interval để xuất từng chữ một
    const interval = setInterval(() => {
        currentLine += fullText[i];

        // Cập nhật textContent với tất cả các dòng
        textElement.textContent = lines.join('\n') + currentLine;

        // Kiểm tra nếu dòng hiện tại đã đầy và cần phải xuống dòng
        if (textElement.scrollWidth > textElement.offsetWidth) {
            lines.push(currentLine.trim()); // Lưu dòng hiện tại
            currentLine = ''; // Bắt đầu dòng mới
        }

        i++;

        // Dừng lại khi đã gõ hết văn bản
        if (i >= fullText.length) {
            clearInterval(interval); // Dừng interval
            if (currentLine.length > 0) {
                lines.push(currentLine); // Lưu dòng cuối cùng nếu có
            }
            textElement.textContent = lines.join('\n'); // Cập nhật lại toàn bộ văn bản sau khi kết thúc

            // Hiển thị button và box khi hoàn thành typing
            document.getElementById('xac-nhan').style.display = 'block';
            document.querySelector('.box').style.display = 'flex'; // Hiển thị box (spinner)
            document.getElementById('message').style.display = 'block'; // Hiển thị món quà
        }
    }, 90); // Tốc độ gõ (100ms mỗi ký tự)
}
        let noChoiceCount = 0;

        function startJourney() {
            try {
                const screens = {
                    initialMessage: document.getElementById('initialMessage'),
                    questionScreen: document.getElementById('questionScreen'),
                    finalGiftScreen: document.getElementById('finalGiftScreen_all')
                };

                Object.keys(screens).forEach((key) => {
                    if (!screens[key]) {
                        throw new Error(`Missing element with ID: ${key}`);
                    }
                });

                screens.initialMessage.style.display = 'none';;
                screens.questionScreen.style.display = 'block';;
            } catch (error) {
                console.error(error);
            }
        }

function handleChoice(accepted) {
    const buttons = document.querySelectorAll('.btn-love');
    buttons.forEach(button => {
        button.style.transition = 'all 0.3s ease-in-out';
        if (accepted) {
            button.style.transform = 'scale(1.2)';
            Swal.fire({
                title: 'Tớ rất vui!',
                text: 'Cùng tớ tạo nên mùa Giáng Sinh tuyệt vời nhé!',
                imageUrl: 'https://media.giphy.com/media/UVk5yzljef0kGiayL1/giphy.gif?cid=790b76117qx8iz8vg39p14mneo0nu1ch5g9aq9cwsbjsvxx9&ep=v1_gifs_search&rid=giphy.gif&ct=g',  // Đường dẫn đến ảnh động (GIF)
                imageWidth: 400,
                imageHeight: 200,
                imageAlt: 'GIF image',
                confirmButtonColor: '#ff4b6e',
                confirmButtonText: 'Đồng ý 2 tay lun nè'
            }).then((result) => {
                document.getElementById('questionScreen').style.display = 'none';
                document.getElementById('finalGiftScreen_all').style.display = 'block'; 
                if (result.isConfirmed) {
                    const textElement1 = document.querySelector('.typing-effect1');
                    typeTextWithLineBreaks(textElement1); // Chạy hiệu ứng typing sau khi xuất hiện
                }
            });
        } else {
            button.style.transform = 'scale(0.8)';
            noChoiceCount++;
            if (noChoiceCount >=3&&noChoiceCount<=17) {
                const button = document.querySelector('button[onclick="handleChoice(false)"]');
                const maxX = window.innerWidth - button.offsetWidth;
                const maxY = window.innerHeight - button.offsetHeight;
                
                button.style.position = 'fixed';
                button.style.left = Math.random() * maxX + 'px';
                button.style.top = Math.random() * maxY + 'px';
            } else {
                if (noChoiceCount > 18){
                    Swal.fire({
                    title: 'Dù sao...😔',
                    text: 'Tớ vẫn luôn quý mến cậu, chúc cậu Giáng Sinh ấm áp!',
                    imageUrl: 'https://media.giphy.com/media/3o6wrebnKWmvx4ZBio/giphy.gif?cid=790b7611lmvmie23mzojn90jsqg64fap28i5ulia7j92k6qg&ep=v1_gifs_search&rid=giphy.gif&ct=g',  // Đường dẫn đến ảnh động (GIF)
                    imageWidth: 400,
                    imageHeight: 200,
                    imageAlt: 'GIF image',  // Mô tả cho ảnh động
                    confirmButtonColor: '#ff4b6e'
                });
            }
            }
        }
    });
}
function openGift() {
    window.location.href = 'gift-box.html';
}
function moveBg(e) {
    const rect = e.target.getBoundingClientRect();
    e.target.style.setProperty('--x', (e.clientX - rect.x) / rect.width * 100);
    e.target.style.setProperty('--y', (e.clientY - rect.y) / rect.height * 100);
}
document.querySelector("button").addEventListener('pointermove', moveBg);

    </script>
</body>
</html>
